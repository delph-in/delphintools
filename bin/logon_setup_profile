#!/bin/bash

# name and create the target profile, either from a skeleton or by means of
# importing an ASCII bi-text file
logon_setup_profile () {
	profile=$1

#	if [ ! -d "$TREEBANK/$profile" ]; then
	if [ ! -s "$profile/item" ]; then
		#if [ ! -s "$TREEBANK/$name/ascii/(basename $skeleton)" ]; then
		#	mkdir -p $TREEBANK/$name/ascii
		#	cp -f $skeleton $TREEBANK/$name/ascii/
		#fi
		
		if [ -n "$ascii" ]; then
			cat 2>&1 <<- PROFILE
				(tsdb::do-import-items "$skeleton" "$profile" :format :bitext)
			PROFILE
		else		
			cat 2>&1 <<- PROFILE
				(tsdb:tsdb :create "$profile" :skeleton "$skeleton")
			PROFILE
		fi
	fi
}

logon_setup_profile $*
